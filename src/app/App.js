import React, {useEffect} from 'react'import Auth from "../pages/Auth/Auth";import Todolist from '../pages/Todolist/Todolist'import Users from '../pages/Users/Users'import Logout from "../components/Logout/Logout";import ErrorBoundary from '../errorBoundary/ErrorBoundary'import {NavLink, Switch, Redirect, Route, useHistory} from 'react-router-dom'import './App.css'import {connect} from "react-redux";import {logout, setIsLogin, setToken, setPersonList, setCurrentPerson} from "../redux/actions/auth";function App({state, setIsLogin, logout, setCurrentPerson}) {  const history = useHistory()  const token = localStorage.getItem('token')  useEffect(() => {    if (token) {      setCurrentPerson(JSON.parse(localStorage.getItem('currentPerson')))      if (state.isAdmin) history.push('/users')      else history.push('/todolist')      const expirationDate = new Date(localStorage.getItem('expirationDate'))      if (expirationDate <= new Date()) {        setIsLogin(true)        logout()      }    }  }, [history, logout, setIsLogin, setCurrentPerson, token, state.isAdmin])  return (    <ErrorBoundary>      <div className='routing'>        {token          ?          <>            {state.currentPerson              ?              <span className='currentUser'>Signed in as {                state.currentPerson.name + ' ' + state.currentPerson.surname}</span>              : null            }            {state.isAdmin              ?              <>                <NavLink to='/users'>Users</NavLink>                <NavLink to='/todolist'>Todolist</NavLink>              </>              : null}            <NavLink to='/logout'>Logout</NavLink>          </>          : null        }      </div>      {token ? <hr/> : null}      <div className='App'>        <Switch>          {token            ?            <>              {state.isAdmin                ? <Route exact path='/users' component={Users}/>                : null              }              <Route exact path='/todolist' component={Todolist}/>              <Route exact path='/logout' component={Logout}/>            </>            :            <>              <Route exact path='/' component={Auth}/>              <Redirect exact to='/'/>            </>          }          {/*<Route render={() => <h1>404 not found</h1>}/>*/}        </Switch>      </div>    </ErrorBoundary>  )}export default connect(  state => ({state: state.auth}),  {setToken, setIsLogin, logout, setPersonList, setCurrentPerson})(App)